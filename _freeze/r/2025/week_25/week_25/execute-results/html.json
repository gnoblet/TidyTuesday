{
  "hash": "5f50bec5ca633894eb25ccac8e89f900",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Measles cases across the world\"\nsubtitle: \"TidyTuesday 2025-06-24\"\ndate: \"2025-06-24\"\nauthor: \"gnoblet\"\ncategories: [r, geofacet, data.table, data-viz]\nimage: \"week_25.png\"\n---\n\n## Overview\n\nThis week's TidyTuesday focused on measles cases across the world. I explored a very minimal viz around red rashes using a global point `geofacet`.\n\n## Dataset\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Libraries\nbox::use(\n  gg = ggplot2,\n  ggf = geofacet,\n  ggt = ggtext,\n  tidytuesdayR[tt_load],\n  ggp = patchwork,\n  data.table[...],\n  sht = showtext,\n  syf = sysfonts\n)\n\n# Get data\ndat <- tt_load(\"2025-06-24\")\ndat_month <- dat$cases_month\nsetDT(dat_month)\n```\n:::\n\n\n\n\n## Analysis\n\n### Data Preparation\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Aggregate by year\ndat_month <- dat_month[,\n  .(measles_clinical = sum(measles_clinical)),\n  by = .(year, iso3)\n]\n```\n:::\n\n\n## Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get grid\ndata(\"world_countries_grid1\", package = \"geofacet\")\n\n# Fonts\nsyf$font_add_google(\"Fascinate Inline\", \"Fascinate Inline\")\nsht$showtext_auto()\nsht$showtext_opts(dpi = 600)\ntitle_font <- \"Fascinate Inline\"\n\n# Measles colors\ncolors <- c(\n  '#F4A6A6', # light coral, reflecting the lighter areas of the rash\n  '#E25822', # a strong red-orange, often used for rashes or spots\n  '#B22222' # a deep firebrick, suitable for the darker spots or advanced rash stages\n)\n\n# Tag\ntag <- \"<span style='color:#B22222;font-size:22pt;'>Clinically-compatible measles cases</span><br><br>\n                <span style='color:#E25822;font-size:14pt;'>A suspected case with fever, maculopapular rash, and at least one of cough, coryza, or conjunctivitis, without a clinical specimen or epidemiological link to a confirmed case.</span>\"\n\n# Plot\ng <- gg$ggplot(dat_month) +\n  gg$aes(\n    x = year,\n    y = measles_clinical,\n    color = measles_clinical,\n    size = measles_clinical\n  ) +\n  gg$geom_point() +\n  gg$scale_size_continuous(range = c(0.3, 4.5)) +\n  gg$scale_color_gradientn(colors = colors) +\n  ggf$facet_geo(~iso3, grid = 'world_countries_grid1') +\n  gg$theme_void() +\n  gg$labs(tag = tag) +\n  gg$theme(\n    plot.background = gg$element_rect(fill = 'white'),\n    strip.background = gg$element_blank(),\n    strip.text.x = gg$element_blank(),\n    legend.position = 'none',\n    plot.tag.position = c(0.05, 0.15),\n    plot.tag = ggt$element_textbox_simple(\n      family = title_font,\n      width = gg$unit(4.5, \"inch\"),\n      lineheight = 1.2,\n      hjust = 0\n    )\n  )\n\n# Create the main visualization\ngg$ggsave('week_25.png', g, height = 10, width = 16, dpi = 600)\n```\n:::\n\n\n## Technical Notes\n\n- **Data Source**: [TidyTuesday GitHub Repository](https://github.com/rfordatascience/tidytuesday)\n- **Analysis Date**: 2025-06-24\n- **Key Libraries**: ggplot2, data.table, geofacet, ggtext\n\n## Viz\n\n![](week_25.png)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}