{
  "hash": "cdc0372b767ba035ade34831cc1c4c8a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"International Mathematical Olympiad Analysis\"\nsubtitle: \"TidyTuesday 2024-09-24\"\ndate: \"2024-09-24\"\nauthor: \"gnoblet\"\ncategories: [r, ggplot2, olympics, education, gender]\nimage: \"../R/2024-09-24.png\"\n---\n\n## Overview\n\nThis week's TidyTuesday explored the International Mathematical Olympiad (IMO) data, I look at gender participation patterns across countries and over time. The IMO is the World Championship Mathematics Competition for High School students, held annually since 1959.\n\n## Dataset\n\nThe IMO dataset includes:\n- Country-level results and team compositions\n- Individual contestant results\n- Timeline data showing participation trends\n- Gender breakdown of contestants by country and year\n\n**Source**: [TidyTuesday International Mathematical Olympiad](https://github.com/rfordatascience/tidytuesday/tree/master/data/2024/2024-09-24)\n\n## Analysis\n\n### Data Preparation\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get data\ntuesdata <- tt_load('2024-09-24')\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat <- vroom(...)\n  problems(dat)\nOne or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat <- vroom(...)\n  problems(dat)\n```\n\n\n:::\n\n```{.r .cell-code}\ncty <- tuesdata$country_results_df\nind <- tuesdata$individual_results_df\ntime <- tuesdata$timeline_df\n```\n:::\n\n\n### Gender Participation Over Time\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Prepare timeline data for gender analysis\ntime_longer <- time |> \n  tyr$pivot_longer(\n    cols = c(male_contestant, female_contestant, all_contestant),\n    names_to = \"gender\",\n    values_to = \"n\"\n  ) |> \n  dyr$mutate(gender = sgr$str_remove(gender, \"_contestant\")) |> \n  dyr$select(year, country, countries, gender, n) |> \n  dyr$group_by(year, gender) |> \n  dyr$summarize(n = sum(n, na.rm = FALSE), .groups = \"drop\") |> \n  dyr$filter(gender != \"all\")\n```\n:::\n\n\n### Country-level Gender Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Analyze gender distribution by country\ncty_gender_top_10 <- cty |>\n  dyr$group_by(country) |>\n  dyr$summarize(\n    tot = sum(team_size_all, na.rm = TRUE), \n    female = sum(team_size_female, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |> \n  dyr$mutate(share = female/tot)\n\n# Get countries with highest female participation\ncty_highest_share <- cty_gender_top_10 |> \n  dyr$arrange(dyr$desc(share)) |>\n  dyr$slice(1:3) |> \n  dyr$pull(country)\n\n# Get countries with no female contestants\ncty_no_female <- cty_gender_top_10 |> \n  dyr$filter(female == 0) |> \n  nrow()\n\ncat(\"Countries with highest female participation:\", paste(cty_highest_share, collapse = \", \"), \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCountries with highest female participation: Laos, Oman, United Arab Emirates \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Countries with no female contestants:\", cty_no_female, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCountries with no female contestants: 11 \n```\n\n\n:::\n:::\n\n\n## Visualizations\n\n### Gender Participation Timeline\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Colors\nfemale_col <- \"#5F4B8BFF\"\nmale_col <- \"#E69A8DFF\"\n\np1 <- gg$ggplot(time_longer) + \n  gg$geom_col(\n    gg$aes(x = year, y = n, color = gender, fill = gender), \n    alpha = 0.6\n  ) +\n  gg$scale_color_manual(\n    values = c(female_col, male_col),\n    labels = c(\"Female\", \"Male\")\n  ) +\n  gg$scale_fill_manual(\n    values = c(female_col, male_col),\n    labels = c(\"Female\", \"Male\")\n  ) +\n  gg$labs(\n    x = \"Year\",\n    y = \"Number of Contestants\",\n    color = \"Gender\",\n    fill = \"Gender\",\n    title = \"Number of <b><span style='color:#5F4B8BFF'>Female</span></b> and <span style='color:#E69A8DFF'><b>Male</b></span> Contestants Over Time\"\n  ) +\n  gg$scale_x_continuous(breaks = seq(1960, 2020, 10)) +\n  gg$theme_minimal(base_size = 14, base_family = \"roboto\") +\n  gg$theme(\n    plot.title = ggt$element_textbox_simple(size = 16),\n    legend.position = \"bottom\",\n    text = gg$element_text(family = \"roboto\", colour = \"#4c4b4c\")\n  )\n```\n:::\n\n\n### Female Participation by Country\n\n\n::: {.cell}\n\n```{.r .cell-code}\np2 <- gg$ggplot(cty_gender_top_10) + \n  gg$geom_point(\n    gg$aes(x = tot, y = female, size = share),\n    color = female_col,\n    alpha = 0.6\n  ) +\n  ggh$gghighlight(\n    country %in% cty_highest_share, \n    label_key = country,\n    label_params = list(size = 4, color = female_col)\n  ) +\n  gg$labs(\n    x = \"Total Contestants\",\n    y = \"Female Contestants\",\n    size = \"Share of Female Contestants\",\n    title = \"<b><span style='color:#5F4B8BFF'>Female</span></b> Contestants vs <b>Total</b> Contestants by Country\", \n    subtitle = paste(\"Highlighted countries:\", paste(cty_highest_share, collapse = \", \"), \"have the highest female participation rates\")\n  ) +\n  gg$scale_x_continuous(breaks = seq(0, 500, 50)) +\n  gg$scale_y_continuous(breaks = seq(0, 100, 10)) +\n  gg$theme_minimal(base_size = 14, base_family = \"roboto\") +\n  gg$theme(\n    plot.title = ggt$element_textbox_simple(size = 16),\n    plot.subtitle = ggt$element_textbox_simple(size = 12),\n    legend.position = \"bottom\",\n    text = gg$element_text(family = \"roboto\", colour = \"#4c4b4c\")\n  )\n```\n:::\n\n\n### Combined Analysis\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create combined visualization\npatchwork <- p1 / p2 + \n  pw$plot_annotation(\n    title = \"<b>Gender Analysis of International Mathematical Olympiad Participation</b>\",\n    subtitle = \"The International Mathematical Olympiad (IMO) has grown from 7 countries in 1959 to over 100 countries today\",\n    caption = \"Data: TidyTuesday 2024-09-24 | Analysis: Guillaume Noblet\",\n    theme = gg$theme(\n      plot.title = ggt$element_markdown(size = 18),\n      plot.subtitle = gg$element_text(size = 14),\n      plot.caption = gg$element_text(size = 10),\n      text = gg$element_text(family = \"roboto\", colour = \"#4c4b4c\")\n    )\n  )\n```\n:::\n\n\n### Save plot\n\n::: {.cell}\n\n```{.r .cell-code}\ngg$ggsave('2024-09-24.png', plot = patchwork, height = 10, width = 10, dpi = 600)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 1 row containing missing values or values outside the scale range\n(`geom_col()`).\n```\n\n\n:::\n:::\n\n\n## Technical Notes\n\n- Used `gghighlight` to emphasize countries with highest female participation\n- Combined timeline and scatter plot views using `patchwork`\n- Color scheme designed to distinguish gender categories clearly\n- Data includes participation from 1959 to recent years\n\n## Viz\n\n![](2024-09-24.png)\n",
    "supporting": [
      "2024-09-24_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}